<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario - Sistema de Planillas MVC</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin: -20px -20px 40px -20px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .toc {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 30px 0;
            border-radius: 5px;
        }
        
        .toc h2 {
            color: #007bff;
            margin-bottom: 15px;
        }
        
        .toc ul {
            list-style: none;
        }
        
        .toc ul li {
            padding: 5px 0;
        }
        
        .toc ul li a {
            color: #495057;
            text-decoration: none;
            font-weight: 500;
        }
        
        .toc ul li a:hover {
            color: #007bff;
        }
        
        .section {
            margin: 40px 0;
        }
        
        .section h2 {
            color: #343a40;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 1.8em;
        }
        
        .section h3 {
            color: #495057;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
        }
        
        .section h4 {
            color: #6c757d;
            margin: 20px 0 10px 0;
            font-size: 1.2em;
        }
        
        .feature-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }
        
        .feature-card h4 {
            color: #28a745;
            margin-bottom: 10px;
        }
        
        .step-list {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .step-list ol {
            padding-left: 20px;
        }
        
        .step-list li {
            margin: 10px 0;
            padding: 5px 0;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .screenshot-placeholder {
            background: #e9ecef;
            border: 2px dashed #adb5bd;
            border-radius: 5px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            color: #6c757d;
            font-style: italic;
        }
        
        .footer {
            background: #343a40;
            color: #f8f9fa;
            text-align: center;
            padding: 30px 20px;
            margin: 40px -20px -20px -20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table th,
        table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        
        table th {
            background: #e9ecef;
            font-weight: 600;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            font-size: 0.85em;
            font-weight: 600;
            border-radius: 12px;
            color: white;
        }
        
        .badge-success { background: #28a745; }
        .badge-info { background: #17a2b8; }
        .badge-warning { background: #ffc107; color: #212529; }
        .badge-danger { background: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Manual de Usuario</h1>
            <p>Sistema de Planillas MVC - Gu√≠a Completa de Funcionalidades</p>
            <p><small>Versi√≥n 1.0 - Agosto 2025</small></p>
        </div>

        <div class="toc">
            <h2>üìë √çndice de Contenidos</h2>
            <ul>
                <li><a href="#introduccion">1. Introducci√≥n al Sistema</a></li>
                <li><a href="#acceso">2. Acceso y Autenticaci√≥n</a></li>
                <li><a href="#dashboard">3. Dashboard Principal</a></li>
                <li><a href="#empleados">4. Gesti√≥n de Empleados</a></li>
                <li><a href="#conceptos">5. Gesti√≥n de Conceptos</a></li>
                <li><a href="#acreedores">6. Gesti√≥n de Acreedores</a></li>
                <li><a href="#planillas">7. Gesti√≥n de Planillas</a></li>
                <li><a href="#reportes">8. Reportes y Consultas</a></li>
                <li><a href="#configuracion">9. Configuraci√≥n del Sistema</a></li>
                <li><a href="#usuarios">10. Gesti√≥n de Usuarios</a></li>
                <li><a href="#soporte">11. Soporte y Soluci√≥n de Problemas</a></li>
            </ul>
        </div>

        <div class="section" id="introduccion">
            <h2>1. üéØ Introducci√≥n al Sistema</h2>
            
            <p>El Sistema de Planillas MVC es una soluci√≥n integral para la gesti√≥n de n√≥minas empresariales, dise√±ado para automatizar y simplificar todos los procesos relacionados con el c√°lculo de sueldos, deducciones y beneficios de los empleados.</p>

            <div class="feature-card">
                <h4>üöÄ Caracter√≠sticas Principales</h4>
                <ul>
                    <li><strong>Gesti√≥n Completa de Empleados:</strong> Registro, edici√≥n y organizaci√≥n del personal</li>
                    <li><strong>Sistema de Conceptos Avanzado:</strong> Configuraci√≥n flexible de ingresos y deducciones</li>
                    <li><strong>F√≥rmulas Din√°micas:</strong> C√°lculos autom√°ticos basados en variables del empleado</li>
                    <li><strong>Validaciones Inteligentes:</strong> Control de condiciones por tipo de planilla y situaci√≥n</li>
                    <li><strong>Procesamiento Transaccional:</strong> Garant√≠a de integridad en los c√°lculos</li>
                    <li><strong>Interfaz Intuitiva:</strong> Dise√±o responsivo y f√°cil navegaci√≥n</li>
                    <li><strong>Multi-usuario:</strong> Diferentes roles y permisos de acceso</li>
                    <li><strong>Reportes Detallados:</strong> Exportaci√≥n en m√∫ltiples formatos</li>
                </ul>
            </div>

            <div class="alert alert-info">
                <strong>üí° Nota Importante:</strong> Este sistema est√° dise√±ado para empresas que requieren un control detallado de su n√≥mina, con capacidad de manejar m√∫ltiples tipos de conceptos, deducciones autom√°ticas y validaciones condicionales.
            </div>
        </div>

        <div class="section" id="acceso">
            <h2>2. üîê Acceso y Autenticaci√≥n</h2>

            <h3>2.1 Inicio de Sesi√≥n</h3>
            <div class="step-list">
                <ol>
                    <li>Acceder a la URL del sistema en el navegador</li>
                    <li>Ingresar nombre de usuario y contrase√±a</li>
                    <li>Hacer clic en el bot√≥n "Iniciar Sesi√≥n"</li>
                    <li>El sistema redirigir√° autom√°ticamente al Dashboard</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Pantalla de login del sistema]
            </div>

            <h3>2.2 Roles y Permisos</h3>
            <table>
                <thead>
                    <tr>
                        <th>Rol</th>
                        <th>Descripci√≥n</th>
                        <th>Permisos</th>
                        <th>Acceso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge badge-danger">Super Admin</span></td>
                        <td>Administrador completo del sistema</td>
                        <td>Acceso total, bypass de restricciones</td>
                        <td>Todos los m√≥dulos</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-warning">Usuario</span></td>
                        <td>Usuario est√°ndar con permisos configurables</td>
                        <td>Seg√∫n configuraci√≥n de role_permissions</td>
                        <td>M√≥dulos asignados</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-info">Solo Lectura</span></td>
                        <td>Usuario con acceso de consulta √∫nicamente</td>
                        <td>Visualizaci√≥n de datos, sin edici√≥n</td>
                        <td>Consultas y reportes</td>
                    </tr>
                </tbody>
            </table>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Seguridad:</strong> Cada acci√≥n est√° protegida con tokens CSRF y validaci√≥n de permisos. El sistema registra autom√°ticamente los accesos y actividades de los usuarios.
            </div>
        </div>

        <div class="section" id="dashboard">
            <h2>3. üìä Dashboard Principal</h2>

            <p>El Dashboard es la pantalla principal del sistema, proporcionando una vista general del estado de las planillas y m√©tricas importantes.</p>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Dashboard principal con m√©tricas y gr√°ficos]
            </div>

            <h3>3.1 M√©tricas en Tiempo Real</h3>
            <div class="feature-card">
                <h4>üìà Indicadores Clave</h4>
                <ul>
                    <li><strong>Total de Empleados:</strong> N√∫mero actual de empleados activos</li>
                    <li><strong>Planillas Procesadas:</strong> Cantidad de planillas generadas este mes</li>
                    <li><strong>Monto Total N√≥mina:</strong> Suma de todos los salarios procesados</li>
                    <li><strong>Conceptos Activos:</strong> N√∫mero de conceptos configurados</li>
                </ul>
            </div>

            <h3>3.2 Gr√°ficos y Estad√≠sticas</h3>
            <ul>
                <li>Evoluci√≥n mensual de la n√≥mina</li>
                <li>Distribuci√≥n por departamentos</li>
                <li>Comparativo de ingresos vs deducciones</li>
                <li>Tendencias de crecimiento del personal</li>
            </ul>

            <h3>3.3 Accesos R√°pidos</h3>
            <p>El Dashboard incluye botones de acceso r√°pido a las funciones m√°s utilizadas:</p>
            <ul>
                <li>Nueva Planilla</li>
                <li>Consultar Empleado</li>
                <li>Procesar N√≥mina</li>
                <li>Generar Reportes</li>
            </ul>
        </div>

        <div class="section" id="empleados">
            <h2>4. üë• Gesti√≥n de Empleados</h2>

            <p>El m√≥dulo de empleados permite administrar toda la informaci√≥n del personal de la empresa, desde datos b√°sicos hasta asignaciones organizacionales.</p>

            <h3>4.1 Lista de Empleados</h3>
            <div class="screenshot-placeholder">
                [Captura de pantalla: Lista de empleados con filtros y b√∫squeda]
            </div>

            <div class="feature-card">
                <h4>üîç Funcionalidades de la Lista</h4>
                <ul>
                    <li><strong>B√∫squeda Avanzada:</strong> Por nombre, c√≥digo, posici√≥n o departamento</li>
                    <li><strong>Filtros Inteligentes:</strong> Estado, posici√≥n, fecha de ingreso</li>
                    <li><strong>Ordenamiento:</strong> Por cualquier columna (ascendente/descendente)</li>
                    <li><strong>Paginaci√≥n:</strong> Navegaci√≥n eficiente con muchos registros</li>
                    <li><strong>Acciones R√°pidas:</strong> Editar, ver detalle, activar/desactivar</li>
                </ul>
            </div>

            <h3>4.2 Crear Nuevo Empleado</h3>
            <div class="step-list">
                <ol>
                    <li>Hacer clic en el bot√≥n "Nuevo Empleado"</li>
                    <li>Completar los campos obligatorios:
                        <ul>
                            <li>C√≥digo de empleado (√∫nico)</li>
                            <li>Nombres y apellidos</li>
                            <li>Fecha de nacimiento</li>
                            <li>Fecha de ingreso</li>
                        </ul>
                    </li>
                    <li>Asignar informaci√≥n organizacional:
                        <ul>
                            <li>Posici√≥n</li>
                            <li>Departamento</li>
                            <li>Horario de trabajo</li>
                        </ul>
                    </li>
                    <li>Cargar fotograf√≠a (opcional)</li>
                    <li>Guardar el registro</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Formulario de creaci√≥n de empleado]
            </div>

            <h3>4.3 Campos del Empleado</h3>
            <table>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Tipo</th>
                        <th>Obligatorio</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>C√≥digo Empleado</td>
                        <td>Texto</td>
                        <td><span class="badge badge-danger">S√≠</span></td>
                        <td>Identificador √∫nico (ej: RVP280963)</td>
                    </tr>
                    <tr>
                        <td>Nombres</td>
                        <td>Texto</td>
                        <td><span class="badge badge-danger">S√≠</span></td>
                        <td>Nombre completo del empleado</td>
                    </tr>
                    <tr>
                        <td>Apellidos</td>
                        <td>Texto</td>
                        <td><span class="badge badge-danger">S√≠</span></td>
                        <td>Apellidos del empleado</td>
                    </tr>
                    <tr>
                        <td>Documento ID</td>
                        <td>Texto</td>
                        <td><span class="badge badge-warning">No</span></td>
                        <td>C√©dula o documento de identidad</td>
                    </tr>
                    <tr>
                        <td>Fecha Nacimiento</td>
                        <td>Fecha</td>
                        <td><span class="badge badge-danger">S√≠</span></td>
                        <td>Para c√°lculo de edad y antig√ºedad</td>
                    </tr>
                    <tr>
                        <td>Fecha Ingreso</td>
                        <td>Fecha</td>
                        <td><span class="badge badge-danger">S√≠</span></td>
                        <td>Para c√°lculo de antig√ºedad laboral</td>
                    </tr>
                    <tr>
                        <td>Posici√≥n</td>
                        <td>Selecci√≥n</td>
                        <td><span class="badge badge-warning">No</span></td>
                        <td>Cargo o puesto de trabajo</td>
                    </tr>
                    <tr>
                        <td>Horario</td>
                        <td>Selecci√≥n</td>
                        <td><span class="badge badge-danger">S√≠</span></td>
                        <td>Horario de trabajo asignado</td>
                    </tr>
                </tbody>
            </table>

            <h3>4.4 Editar Empleado</h3>
            <p>Para modificar la informaci√≥n de un empleado:</p>
            <div class="step-list">
                <ol>
                    <li>Localizar el empleado en la lista</li>
                    <li>Hacer clic en el bot√≥n "Editar" (√≠cono de l√°piz)</li>
                    <li>Modificar los campos necesarios</li>
                    <li>Guardar los cambios</li>
                </ol>
            </div>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Importante:</strong> Los cambios en la informaci√≥n del empleado se reflejar√°n en las pr√≥ximas planillas. Las planillas ya procesadas no se modifican autom√°ticamente.
            </div>
        </div>

        <div class="section" id="conceptos">
            <h2>5. üí∞ Gesti√≥n de Conceptos</h2>

            <p>Los conceptos son la base del sistema de n√≥mina, representando todos los ingresos y deducciones que pueden aplicarse a los empleados.</p>

            <h3>5.1 ¬øQu√© es un Concepto?</h3>
            <p>Un concepto es cualquier elemento que afecte el c√°lculo del salario de un empleado, puede ser:</p>
            <ul>
                <li><strong>Ingresos (A):</strong> Salario base, bonificaciones, comisiones, horas extra</li>
                <li><strong>Deducciones (D):</strong> Impuestos, seguro social, pr√©stamos, descuentos</li>
            </ul>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Lista de conceptos con filtros por tipo]
            </div>

            <h3>5.2 Crear Nuevo Concepto</h3>
            <div class="step-list">
                <ol>
                    <li>Ir al m√≥dulo "Conceptos" en el men√∫ lateral</li>
                    <li>Hacer clic en "Nuevo Concepto"</li>
                    <li>Completar informaci√≥n b√°sica:
                        <ul>
                            <li>C√≥digo del concepto</li>
                            <li>Descripci√≥n</li>
                            <li>Tipo (Ingreso/Deducci√≥n)</li>
                            <li>Unidad (monto/porcentaje/d√≠as)</li>
                        </ul>
                    </li>
                    <li>Configurar f√≥rmula o valor fijo</li>
                    <li>Establecer condiciones de aplicaci√≥n</li>
                    <li>Configurar opciones avanzadas</li>
                    <li>Guardar el concepto</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Formulario de creaci√≥n de concepto]
            </div>

            <h3>5.3 Campos del Concepto</h3>
            <table>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>C√≥digo</strong></td>
                        <td>Identificador √∫nico del concepto</td>
                        <td>BAINCO, 001, SALARIO</td>
                    </tr>
                    <tr>
                        <td><strong>Descripci√≥n</strong></td>
                        <td>Nombre descriptivo del concepto</td>
                        <td>"Salario Base Mensual"</td>
                    </tr>
                    <tr>
                        <td><strong>Tipo</strong></td>
                        <td>A=Ingreso, D=Deducci√≥n</td>
                        <td>A para bonos, D para descuentos</td>
                    </tr>
                    <tr>
                        <td><strong>Unidad</strong></td>
                        <td>Forma de c√°lculo</td>
                        <td>monto, porcentaje, d√≠as</td>
                    </tr>
                    <tr>
                        <td><strong>F√≥rmula</strong></td>
                        <td>Expresi√≥n matem√°tica para c√°lculo</td>
                        <td>SALARIO * 0.15</td>
                    </tr>
                    <tr>
                        <td><strong>Valor Fijo</strong></td>
                        <td>Monto fijo cuando no hay f√≥rmula</td>
                        <td>500.00</td>
                    </tr>
                </tbody>
            </table>

            <h3>5.4 Configuraciones Avanzadas</h3>
            <p>El sistema incluye 6 opciones configurables mediante checkboxes:</p>

            <table>
                <thead>
                    <tr>
                        <th>Opci√≥n</th>
                        <th>Descripci√≥n</th>
                        <th>Uso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Imprime Detalles</strong></td>
                        <td>Si aparece detallado en reportes</td>
                        <td>Mostrar en n√≥mina impresa</td>
                    </tr>
                    <tr>
                        <td><strong>Prorratea</strong></td>
                        <td>Si se calcula proporcionalmente</td>
                        <td>Para empleados de ingreso tard√≠o</td>
                    </tr>
                    <tr>
                        <td><strong>Modifica Valor</strong></td>
                        <td>Permite edici√≥n manual del monto</td>
                        <td>Ajustes espec√≠ficos por empleado</td>
                    </tr>
                    <tr>
                        <td><strong>Valor Referencia</strong></td>
                        <td>Se usa como base para otros c√°lculos</td>
                        <td>Salario base para porcentajes</td>
                    </tr>
                    <tr>
                        <td><strong>Monto C√°lculo</strong></td>
                        <td>Habilita evaluaci√≥n de f√≥rmulas</td>
                        <td><span class="badge badge-success">Cr√≠tico</span> para f√≥rmulas din√°micas</td>
                    </tr>
                    <tr>
                        <td><strong>Monto Cero</strong></td>
                        <td>Permite insertar registros con monto 0</td>
                        <td>Para conceptos informativos</td>
                    </tr>
                </tbody>
            </table>

            <div class="alert alert-success">
                <strong>‚úÖ Tip:</strong> La opci√≥n "Monto C√°lculo" debe estar activada para que el sistema eval√∫e f√≥rmulas din√°micas como ACREEDOR(EMPLEADO, id).
            </div>

            <h3>5.5 F√≥rmulas y Variables</h3>
            <p>El sistema soporta f√≥rmulas complejas con variables del empleado:</p>

            <div class="feature-card">
                <h4>üßÆ Variables Disponibles</h4>
                <ul>
                    <li><strong>SALARIO / SUELDO:</strong> Salario base de la posici√≥n</li>
                    <li><strong>EMPLEADO:</strong> C√≥digo del empleado</li>
                    <li><strong>FICHA:</strong> C√≥digo del empleado (alias)</li>
                    <li><strong>HORAS:</strong> Horas semanales de trabajo</li>
                    <li><strong>ANTIGUEDAD:</strong> A√±os de servicio en la empresa</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4>üîß Funciones Especiales</h4>
                <ul>
                    <li><strong>ACREEDOR(EMPLEADO, id):</strong> Obtiene monto de deducci√≥n por acreedor</li>
                    <li><strong>SI(condicion, valor_si, valor_no):</strong> Condiciones l√≥gicas</li>
                    <li><strong>Operadores:</strong> +, -, *, /, (), >, <, >=, <=</li>
                </ul>
            </div>

            <div class="code-block">
Ejemplos de F√≥rmulas:
‚Ä¢ SALARIO * 0.0833    (Bonificaci√≥n incentivo 8.33%)
‚Ä¢ ACREEDOR(EMPLEADO, 11)    (Deducci√≥n banco industrial)
‚Ä¢ SI(ANTIGUEDAD > 5, SALARIO * 0.10, 0)    (Bono antig√ºedad)
‚Ä¢ HORAS * 125.50    (Pago por horas trabajadas)
            </div>

            <h3>5.6 Condiciones de Aplicaci√≥n</h3>
            <p>Los conceptos pueden tener restricciones sobre cu√°ndo aplicar:</p>

            <h4>5.6.1 Tipos de Planilla</h4>
            <p>Determina en qu√© tipos de planilla se aplica el concepto (quincenal, mensual, aguinaldo, etc.)</p>

            <h4>5.6.2 Situaciones de Empleado</h4>
            <p>Define a qu√© empleados aplica seg√∫n su situaci√≥n (activo, vacaciones, licencia, etc.)</p>

            <h4>5.6.3 Frecuencias</h4>
            <p>Controla la periodicidad de aplicaci√≥n (siempre, una vez, condicional)</p>

            <div class="alert alert-info">
                <strong>üí° Validaciones Inteligentes:</strong> El sistema usa tablas relacionales (concepto_tipos_planilla, concepto_situaciones, concepto_frecuencias) para validar autom√°ticamente si un concepto aplica a una planilla espec√≠fica.
            </div>

            <h3>5.7 Probar F√≥rmulas</h3>
            <p>El sistema incluye una herramienta para probar f√≥rmulas antes de aplicarlas:</p>

            <div class="step-list">
                <ol>
                    <li>En la vista de conceptos, hacer clic en "Probar F√≥rmula"</li>
                    <li>Seleccionar un empleado de prueba</li>
                    <li>Ingresar la f√≥rmula a evaluar</li>
                    <li>Ver el resultado calculado en tiempo real</li>
                    <li>Verificar que las variables se resuelven correctamente</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Modal de prueba de f√≥rmulas con empleado seleccionado]
            </div>
        </div>

        <div class="section" id="acreedores">
            <h2>6. üè¶ Gesti√≥n de Acreedores</h2>

            <p>Los acreedores representan entidades externas que requieren deducciones del salario del empleado (bancos, cooperativas, juzgados, etc.).</p>

            <h3>6.1 ¬øQu√© es un Acreedor?</h3>
            <p>Un acreedor es cualquier instituci√≥n o entidad que tenga derecho a recibir una deducci√≥n del salario del empleado:</p>
            <ul>
                <li>Bancos (pr√©stamos, tarjetas de cr√©dito)</li>
                <li>Cooperativas (ahorros, pr√©stamos)</li>
                <li>Juzgados (embargos, pensiones alimentarias)</li>
                <li>Instituciones (seguros, planes de retiro)</li>
            </ul>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Lista de acreedores con tipos y estados]
            </div>

            <h3>6.2 Crear Nuevo Acreedor</h3>
            <div class="step-list">
                <ol>
                    <li>Acceder al m√≥dulo "Acreedores"</li>
                    <li>Hacer clic en "Nuevo Acreedor"</li>
                    <li>Completar informaci√≥n b√°sica:
                        <ul>
                            <li>C√≥digo de identificaci√≥n</li>
                            <li>Nombre o raz√≥n social</li>
                            <li>Tipo de acreedor</li>
                            <li>Informaci√≥n de contacto</li>
                        </ul>
                    </li>
                    <li>Configurar estado (activo/inactivo)</li>
                    <li>Agregar observaciones si es necesario</li>
                    <li>Guardar el registro</li>
                </ol>
            </div>

            <h3>6.3 Tipos de Acreedores</h3>
            <table>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>PERSONAL</strong></td>
                        <td>Pr√©stamos personales</td>
                        <td>Banco Industrial, Banco Agromercantil</td>
                    </tr>
                    <tr>
                        <td><strong>VEHICULAR</strong></td>
                        <td>Financiamiento de veh√≠culos</td>
                        <td>Ford Credit, GM Financial</td>
                    </tr>
                    <tr>
                        <td><strong>HIPOTECARIO</strong></td>
                        <td>Cr√©ditos hipotecarios</td>
                        <td>CHN, FHA, Banrural</td>
                    </tr>
                    <tr>
                        <td><strong>EMBARGO</strong></td>
                        <td>Retenciones judiciales</td>
                        <td>Juzgados, embargos</td>
                    </tr>
                    <tr>
                        <td><strong>JUDICIAL</strong></td>
                        <td>Retenciones por orden judicial</td>
                        <td>Pensiones alimentarias</td>
                    </tr>
                </tbody>
            </table>

            <h3>6.4 Eliminaci√≥n de Acreedores</h3>
            <p>El sistema permite eliminar acreedores de forma segura con validaciones autom√°ticas:</p>

            <div class="feature-card">
                <h4>üîí Validaciones de Seguridad</h4>
                <ul>
                    <li><strong>Verificaci√≥n de Deducciones:</strong> Solo permite eliminar acreedores sin deducciones activas</li>
                    <li><strong>Modal de Confirmaci√≥n:</strong> Requiere confirmaci√≥n expl√≠cita del usuario</li>
                    <li><strong>Logging de Debug:</strong> Registra todas las acciones para auditor√≠a</li>
                    <li><strong>Protecci√≥n de Datos:</strong> Previene eliminaci√≥n accidental de informaci√≥n cr√≠tica</li>
                </ul>
            </div>

            <div class="step-list">
                <h4>Proceso de Eliminaci√≥n:</h4>
                <ol>
                    <li>En la lista de acreedores, hacer clic en el bot√≥n rojo "Eliminar"</li>
                    <li>Se abre un modal de confirmaci√≥n mostrando el nombre del acreedor</li>
                    <li>Si el acreedor tiene deducciones activas, aparece un mensaje de error</li>
                    <li>Si no tiene deducciones, hacer clic en "Eliminar Acreedor" para confirmar</li>
                    <li>El acreedor se elimina permanentemente de la base de datos</li>
                </ol>
            </div>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Importante:</strong> Los acreedores con deducciones asignadas NO pueden eliminarse. Primero debe eliminar todas las deducciones asociadas al acreedor.
            </div>

            <h3>6.5 Asignaci√≥n de Deducciones</h3>
            <p>Una vez creado el acreedor, se pueden asignar deducciones espec√≠ficas a los empleados:</p>

            <div class="step-list">
                <ol>
                    <li>Ir a la secci√≥n "Deducciones" del acreedor</li>
                    <li>Hacer clic en "Agregar Deducci√≥n"</li>
                    <li>Seleccionar el empleado</li>
                    <li>Establecer el monto de la deducci√≥n</li>
                    <li>Agregar descripci√≥n detallada</li>
                    <li>Confirmar la asignaci√≥n</li>
                </ol>
            </div>

            <div class="feature-card">
                <h4>üí≥ Gesti√≥n de Deducciones</h4>
                <ul>
                    <li><strong>Por Empleado:</strong> Cada empleado puede tener m√∫ltiples deducciones</li>
                    <li><strong>Montos Variables:</strong> Diferentes montos seg√∫n el tipo de deuda</li>
                    <li><strong>Estado Activo:</strong> Activar/desactivar deducciones temporalmente</li>
                    <li><strong>Historial:</strong> Registro completo de todas las deducciones aplicadas</li>
                </ul>
            </div>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Importante:</strong> Las deducciones deben registrarse con el c√≥digo del empleado (employee_id) no con el ID num√©rico. Ejemplo: 'RVP280963' no '5015'.
            </div>

            <h3>6.6 Integraci√≥n con Conceptos</h3>
            <p>Los acreedores se integran autom√°ticamente con el sistema de conceptos mediante la funci√≥n:</p>

            <div class="code-block">
ACREEDOR(EMPLEADO, id_acreedor)

Ejemplo:
‚Ä¢ ACREEDOR(EMPLEADO, 11) - Obtiene la deducci√≥n del acreedor 11 para el empleado actual
            </div>

            <p>Cuando se procesa una planilla, el sistema:</p>
            <ol>
                <li>Eval√∫a la f√≥rmula del concepto</li>
                <li>Resuelve EMPLEADO con el c√≥digo del empleado</li>
                <li>Busca en la tabla deductions la deducci√≥n correspondiente</li>
                <li>Aplica el monto encontrado al concepto</li>
            </ol>
        </div>

        <div class="section" id="planillas">
            <h2>7. üìã Gesti√≥n de Planillas</h2>

            <p>Las planillas son el coraz√≥n del sistema, donde se calculan y procesan todos los conceptos para generar la n√≥mina de los empleados.</p>

            <h3>7.1 Crear Nueva Planilla</h3>
            <div class="step-list">
                <ol>
                    <li>Ir al m√≥dulo "Planillas" en el men√∫</li>
                    <li>Hacer clic en "Nueva Planilla"</li>
                    <li>Completar informaci√≥n b√°sica:
                        <ul>
                            <li>Descripci√≥n de la planilla</li>
                            <li>Tipo de planilla (quincenal, mensual, etc.)</li>
                            <li>Per√≠odo de inicio y fin</li>
                            <li>Observaciones (opcional)</li>
                        </ul>
                    </li>
                    <li>Guardar como "PENDIENTE"</li>
                    <li>Procesar la planilla para calcular conceptos</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Formulario de creaci√≥n de planilla]
            </div>

            <h3>7.2 üîç Filtrado por Tipo de Planilla</h3>
            <p>El sistema permite filtrar y visualizar planillas espec√≠ficas seg√∫n el tipo seleccionado en el dropdown del navbar:</p>

            <div class="feature-card">
                <h4>üìã Funcionalidades del Filtrado</h4>
                <ul>
                    <li><strong>Filtrado Din√°mico:</strong> Al seleccionar un tipo de planilla en el navbar, la lista se actualiza autom√°ticamente</li>
                    <li><strong>Indicador Visual:</strong> Aparece un alert informativo mostrando el filtro activo</li>
                    <li><strong>Columna de Tipo:</strong> Nueva columna en la tabla mostrando el tipo de cada planilla</li>
                    <li><strong>Bot√≥n de Limpieza:</strong> Opci√≥n para mostrar todas las planillas sin filtro</li>
                </ul>
            </div>

            <div class="step-list">
                <h4>C√≥mo usar el filtro:</h4>
                <ol>
                    <li>Seleccionar el tipo de planilla deseado en el dropdown del navbar (esquina superior derecha)</li>
                    <li>Navegar a "Planillas" en el men√∫ principal</li>
                    <li>Observar el alert azul que confirma el filtro activo</li>
                    <li>Ver solo las planillas correspondientes al tipo seleccionado</li>
                    <li>Hacer clic en "Mostrar todas las planillas" para quitar el filtro</li>
                </ol>
            </div>

            <div class="alert alert-info">
                <strong>üí° Consistencia:</strong> El filtro se mantiene sincronizado entre diferentes p√°ginas del sistema, proporcionando una experiencia de usuario coherente.
            </div>

            <h3>7.3 Estados de Planilla</h3>
            <table>
                <thead>
                    <tr>
                        <th>Estado</th>
                        <th>Descripci√≥n</th>
                        <th>Acciones Disponibles</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge badge-warning">PENDIENTE</span></td>
                        <td>Planilla creada pero no procesada</td>
                        <td>Procesar, Editar, Eliminar</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-success">PROCESADA</span></td>
                        <td>Planilla calculada y lista</td>
                        <td>Ver Detalle, Reprocesar, Exportar, Reportes</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-info">PAGADA</span></td>
                        <td>Planilla pagada a empleados</td>
                        <td>Ver Detalle, Reportes (solo consulta)</td>
                    </tr>
                </tbody>
            </table>

            <h3>7.4 Procesamiento de Planilla</h3>
            <p>El procesamiento es donde ocurre la "magia" del c√°lculo autom√°tico:</p>

            <div class="feature-card">
                <h4>üîÑ Proceso de C√°lculo Mejorado</h4>
                <ol>
                    <li><strong>Validaci√≥n Previa:</strong> Antes de iniciar, el sistema verifica que existan empleados para el tipo de planilla seleccionado</li>
                    <li><strong>Filtrado por Tipo:</strong> Solo procesa empleados que coincidan con el tipo de planilla especificado en el dropdown</li>
                    <li><strong>Evaluaci√≥n de Conceptos:</strong> Para cada empleado, eval√∫a cada concepto:
                        <ul>
                            <li>Verifica condiciones (tipo planilla, situaci√≥n, frecuencia)</li>
                            <li>Eval√∫a f√≥rmulas con variables del empleado</li>
                            <li>Calcula montos finales</li>
                        </ul>
                    </li>
                    <li><strong>Aplicaci√≥n de Deducciones:</strong> Procesa conceptos con funci√≥n ACREEDOR()</li>
                    <li><strong>Validaci√≥n de Montos:</strong> Verifica reglas de monto_cero</li>
                    <li><strong>Inserci√≥n Transaccional:</strong> Guarda todos los c√°lculos de forma segura</li>
                    <li><strong>Actualizaci√≥n de Estado:</strong> Marca la planilla como PROCESADA</li>
                </ol>
            </div>

            <div class="alert alert-success">
                <strong>‚úÖ Transacciones Seguras:</strong> Todo el procesamiento se realiza dentro de transacciones de base de datos. Si ocurre alg√∫n error, todos los cambios se revierten autom√°ticamente.
            </div>

            <h3>7.5 Ver Detalle de Planilla</h3>
            <p>Una vez procesada, puedes ver el detalle completo de la planilla:</p>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Detalle de planilla con lista de empleados]
            </div>

            <div class="feature-card">
                <h4>üìä Informaci√≥n Mostrada</h4>
                <ul>
                    <li><strong>Resumen de la Planilla:</strong> Descripci√≥n, estado, fechas, totales</li>
                    <li><strong>Estad√≠sticas:</strong> Total empleados, suma de ingresos, suma de deducciones, neto total</li>
                    <li><strong>Lista de Empleados:</strong> Tabla con paginaci√≥n AJAX mostrando:
                        <ul>
                            <li>Nombre del empleado</li>
                            <li>Posici√≥n</li>
                            <li>Total de ingresos</li>
                            <li>Total de deducciones</li>
                            <li>Salario neto</li>
                            <li>Acciones (ver detalle, regenerar)</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h3>7.6 Detalle Individual del Empleado</h3>
            <p>Para cada empleado, puedes ver el desglose completo de conceptos:</p>

            <div class="step-list">
                <ol>
                    <li>En el detalle de la planilla, hacer clic en "Ver Detalle" del empleado</li>
                    <li>Se muestra la informaci√≥n completa:
                        <ul>
                            <li>Datos del empleado (c√≥digo, nombre, posici√≥n, salario base)</li>
                            <li>Lista de todos los conceptos aplicados</li>
                            <li>Ingresos detallados con montos</li>
                            <li>Deducciones detalladas con montos</li>
                            <li>Resumen de totales</li>
                        </ul>
                    </li>
                    <li>Opci√≥n de regenerar empleado individual si es necesario</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Detalle individual del empleado con conceptos]
            </div>

            <h3>7.7 Regeneraci√≥n de Empleados</h3>
            <p>Si es necesario recalcular un empleado espec√≠fico (por cambios en datos o conceptos):</p>

            <div class="step-list">
                <ol>
                    <li>Acceder al detalle del empleado en la planilla</li>
                    <li>Hacer clic en "Regenerar Empleado"</li>
                    <li>El sistema autom√°ticamente:
                        <ul>
                            <li>Elimina los c√°lculos anteriores del empleado</li>
                            <li>Vuelve a evaluar todos los conceptos aplicables</li>
                            <li>Recalcula montos con datos actuales</li>
                            <li>Actualiza los totales de la planilla</li>
                        </ul>
                    </li>
                    <li>Confirmar que los nuevos c√°lculos son correctos</li>
                </ol>
            </div>

            <div class="alert alert-info">
                <strong>üí° Regeneraci√≥n Inteligente:</strong> La regeneraci√≥n individual no afecta a otros empleados de la planilla, permitiendo ajustes precisos sin reprocesar toda la n√≥mina.
            </div>

            <h3>7.8 Reprocesamiento Completo</h3>
            <p>Para regenerar toda la planilla (√∫til despu√©s de cambios masivos):</p>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Cuidado:</strong> El reprocesamiento elimina TODOS los c√°lculos existentes y los regenera desde cero. Solo usar cuando sea absolutamente necesario.
            </div>

            <div class="step-list">
                <ol>
                    <li>En la vista de planilla, hacer clic en "Reprocesar"</li>
                    <li>Confirmar la acci√≥n (es irreversible)</li>
                    <li>El sistema procesa todos los empleados nuevamente</li>
                    <li>Verificar que todos los c√°lculos son correctos</li>
                </ol>
            </div>
        </div>

        <div class="section" id="reportes">
            <h2>8. üìÑ Reportes y Exportaciones</h2>

            <p>El sistema incluye un centro de reportes completo con m√∫ltiples opciones de generaci√≥n y exportaci√≥n de datos.</p>

            <h3>8.1 Centro de Reportes</h3>
            <p>Acceda al centro de reportes desde el men√∫ lateral: <strong>Reportes > Centro de Reportes</strong></p>
            
            <table>
                <thead>
                    <tr>
                        <th>Reporte</th>
                        <th>Descripci√≥n</th>
                        <th>Formato</th>
                        <th>Acceso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Planilla PDF</strong></td>
                        <td>Reporte completo de planilla con todos los empleados</td>
                        <td>PDF</td>
                        <td>Bot√≥n rojo üî¥ en listado</td>
                    </tr>
                    <tr>
                        <td><strong>Comprobantes de Pago</strong></td>
                        <td>Comprobantes individuales de todos los empleados</td>
                        <td>PDF</td>
                        <td>Bot√≥n verde üü¢ en listado</td>
                    </tr>
                    <tr>
                        <td><strong>Reporte de Acreedores</strong></td>
                        <td>Deducciones agrupadas por acreedor</td>
                        <td>PDF</td>
                        <td>Bot√≥n amarillo üü° en listado</td>
                    </tr>
                    <tr>
                        <td><strong>Reporte General Acreedores</strong></td>
                        <td>Consolidado de todos los acreedores</td>
                        <td>PDF</td>
                        <td>Bot√≥n en parte inferior</td>
                    </tr>
                </tbody>
            </table>

            <h3>8.2 Exportaciones de Datos</h3>
            <p>Acceda a las exportaciones desde: <strong>Reportes > Exportar Datos</strong></p>
            
            <div class="step-list">
                <h4>Tipos de Exportaci√≥n Disponibles:</h4>
                <ol>
                    <li><strong>Empleados</strong>
                        <ul>
                            <li>Informaci√≥n personal completa</li>
                            <li>Posiciones y cargos</li>
                            <li>Horarios y fechas</li>
                            <li>Estado activo/inactivo</li>
                        </ul>
                    </li>
                    <li><strong>Acreedores</strong>
                        <ul>
                            <li>Descripci√≥n y montos</li>
                            <li>C√≥digos de acreedor</li>
                            <li>Tipos y observaciones</li>
                            <li>Estado y relaciones</li>
                        </ul>
                    </li>
                    <li><strong>Conceptos</strong>
                        <ul>
                            <li>F√≥rmulas y configuraci√≥n</li>
                            <li>Cuentas contables</li>
                            <li>Tipos y unidades</li>
                            <li>Configuraci√≥n de reportes</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <h3>8.3 C√≥mo Generar Reportes</h3>
            <div class="step-list">
                <h4>Para Reportes PDF:</h4>
                <ol>
                    <li>Acceder a <strong>Reportes > Centro de Reportes</strong></li>
                    <li>Localizar la planilla deseada en la tabla</li>
                    <li>Hacer clic en el bot√≥n correspondiente:
                        <ul>
                            <li><span style="color: #dc3545">üî¥ PDF</span> - Reporte completo</li>
                            <li><span style="color: #28a745">üü¢ Comprobantes</span> - Comprobantes individuales</li>
                            <li><span style="color: #ffc107">üü° Acreedores</span> - Reporte de acreedores</li>
                        </ul>
                    </li>
                    <li>El reporte se abrir√° en una nueva pesta√±a</li>
                    <li>Descargar o imprimir seg√∫n necesidad</li>
                </ol>
            </div>

            <div class="step-list">
                <h4>Para Exportaciones CSV:</h4>
                <ol>
                    <li>Acceder a <strong>Reportes > Exportar Datos</strong></li>
                    <li>Seleccionar el tipo de datos a exportar</li>
                    <li>Hacer clic en el bot√≥n de exportaci√≥n correspondiente</li>
                    <li>El archivo CSV se descargar√° autom√°ticamente</li>
                    <li>Abrir con Excel, Google Sheets o similar</li>
                </ol>
            </div>

            <div class="screenshot-placeholder">
                [Captura de pantalla: Centro de reportes con botones de acci√≥n optimizados]
            </div>

            <h3>8.4 Caracter√≠sticas de los Archivos</h3>
            <div class="info-box">
                <h4>üìÑ Reportes PDF:</h4>
                <ul>
                    <li>Formato profesional listo para imprimir</li>
                    <li>Headers y footers con informaci√≥n de la empresa</li>
                    <li>Datos organizados por categor√≠as</li>
                    <li>Totales y subtotales autom√°ticos</li>
                    <li>Informaci√≥n de empleado y per√≠odo</li>
                </ul>
            </div>

            <div class="info-box">
                <h4>üìä Exportaciones CSV:</h4>
                <ul>
                    <li>Codificaci√≥n UTF-8 para caracteres especiales</li>
                    <li>Compatible con Excel y Google Sheets</li>
                    <li>Headers descriptivos en espa√±ol</li>
                    <li>Datos completos incluyendo registros inactivos</li>
                    <li>Nombres con fecha y hora de generaci√≥n</li>
                </ul>
            </div>
        </div>

        <div class="section" id="configuracion">
            <h2>9. ‚öôÔ∏è Configuraci√≥n del Sistema</h2>

            <p>La configuraci√≥n del sistema permite adaptar el comportamiento y apariencia seg√∫n las necesidades espec√≠ficas de la empresa.</p>

            <h3>9.1 Informaci√≥n de la Empresa</h3>
            <div class="step-list">
                <ol>
                    <li>Acceder a "Configuraci√≥n" > "Empresa"</li>
                    <li>Completar informaci√≥n b√°sica:
                        <ul>
                            <li>Nombre de la empresa</li>
                            <li>NIT o registro fiscal</li>
                            <li>Direcci√≥n completa</li>
                            <li>Tel√©fonos y emails</li>
                        </ul>
                    </li>
                    <li>Configurar moneda:
                        <ul>
                            <li>S√≠mbolo de moneda (Q, $, ‚Ç¨, etc.)</li>
                            <li>C√≥digo de moneda (GTQ, USD, EUR, etc.)</li>
                            <li>Decimales a mostrar</li>
                        </ul>
                    </li>
                    <li>Subir logo de la empresa</li>
                    <li>Guardar configuraci√≥n</li>
                </ol>
            </div>

            <div class="alert alert-success">
                <strong>‚úÖ S√≠mbolos Din√°micos:</strong> Una vez configurada la moneda, todos los montos en el sistema mostrar√°n autom√°ticamente el s√≠mbolo correcto.
            </div>

            <h3>9.2 Tipos de Planilla</h3>
            <p>Configurar los diferentes tipos de planilla que maneja la empresa:</p>

            <table>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Descripci√≥n</th>
                        <th>Frecuencia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Quincenal</td>
                        <td>Pago cada 15 d√≠as</td>
                        <td>24 planillas por a√±o</td>
                    </tr>
                    <tr>
                        <td>Mensual</td>
                        <td>Pago mensual</td>
                        <td>12 planillas por a√±o</td>
                    </tr>
                    <tr>
                        <td>Aguinaldo</td>
                        <td>Bono navide√±o</td>
                        <td>1 vez por a√±o</td>
                    </tr>
                    <tr>
                        <td>Bonificaci√≥n</td>
                        <td>Bonos especiales</td>
                        <td>Seg√∫n necesidad</td>
                    </tr>
                    <tr>
                        <td>Vacaciones</td>
                        <td>Pago de vacaciones</td>
                        <td>Seg√∫n pol√≠tica</td>
                    </tr>
                </tbody>
            </table>

            <h3>9.3 Situaciones de Empleado</h3>
            <p>Definir los estados posibles de los empleados:</p>

            <ul>
                <li><strong>Activo:</strong> Empleado trabajando normalmente</li>
                <li><strong>Vacaciones:</strong> Empleado en per√≠odo de descanso</li>
                <li><strong>Licencia:</strong> Permiso temporal (m√©dica, personal, etc.)</li>
                <li><strong>Suspensi√≥n:</strong> Suspendido temporalmente</li>
                <li><strong>Inactivo:</strong> No est√° trabajando actualmente</li>
                <li><strong>Baja:</strong> Ya no pertenece a la empresa</li>
            </ul>

            <h3>9.4 Frecuencias de Aplicaci√≥n</h3>
            <p>Controlar cu√°ndo se aplican los conceptos:</p>

            <ul>
                <li><strong>Siempre:</strong> En todas las planillas</li>
                <li><strong>Una vez:</strong> Solo en la primera planilla del empleado</li>
                <li><strong>Condicional:</strong> Seg√∫n reglas espec√≠ficas</li>
                <li><strong>Manual:</strong> Solo cuando se especifique manualmente</li>
            </ul>

            <h3>9.5 Estructura Organizacional</h3>
            <p>El sistema soporta una estructura organizacional de 7 niveles:</p>

            <ol>
                <li><strong>Partidas:</strong> Divisi√≥n presupuestaria</li>
                <li><strong>Cargos:</strong> Puestos de trabajo</li>
                <li><strong>Funciones:</strong> Roles espec√≠ficos</li>
                <li><strong>Posiciones:</strong> Ubicaciones organizacionales</li>
                <li><strong>Departamentos:</strong> √Åreas de trabajo</li>
                <li><strong>Sucursales:</strong> Ubicaciones f√≠sicas</li>
                <li><strong>Regiones:</strong> Divisiones geogr√°ficas</li>
            </ol>

            <div class="feature-card">
                <h4>üèóÔ∏è Configuraci√≥n Organizacional</h4>
                <p>Cada m√≥dulo de la estructura organizacional puede ser activado/desactivado seg√∫n las necesidades:</p>
                <ul>
                    <li>Activar solo los m√≥dulos que la empresa utiliza</li>
                    <li>Definir jerarqu√≠as entre niveles</li>
                    <li>Asignar empleados a m√∫ltiples niveles</li>
                    <li>Generar reportes por estructura organizacional</li>
                </ul>
            </div>
        </div>

        <div class="section" id="usuarios">
            <h2>10. üë§ Gesti√≥n de Usuarios</h2>

            <p>El sistema maneja m√∫ltiples usuarios con diferentes roles y permisos, permitiendo un control granular del acceso.</p>

            <h3>10.1 Crear Nuevo Usuario</h3>
            <div class="step-list">
                <ol>
                    <li>Acceder a "Configuraci√≥n" > "Usuarios"</li>
                    <li>Hacer clic en "Nuevo Usuario"</li>
                    <li>Completar informaci√≥n personal:
                        <ul>
                            <li>Nombre de usuario (√∫nico)</li>
                            <li>Nombres y apellidos</li>
                            <li>Email corporativo</li>
                            <li>Contrase√±a segura</li>
                        </ul>
                    </li>
                    <li>Asignar rol del sistema</li>
                    <li>Configurar permisos espec√≠ficos</li>
                    <li>Activar/desactivar usuario</li>
                    <li>Guardar registro</li>
                </ol>
            </div>

            <h3>10.2 Roles del Sistema</h3>
            <table>
                <thead>
                    <tr>
                        <th>Rol</th>
                        <th>Capacidades</th>
                        <th>Restricciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge badge-danger">Super Admin</span></td>
                        <td>
                            <ul>
                                <li>Acceso completo al sistema</li>
                                <li>Configuraci√≥n de empresa</li>
                                <li>Gesti√≥n de usuarios</li>
                                <li>Todas las operaciones</li>
                            </ul>
                        </td>
                        <td>Ninguna</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-warning">Usuario</span></td>
                        <td>
                            <ul>
                                <li>Gesti√≥n de empleados</li>
                                <li>Creaci√≥n de planillas</li>
                                <li>Procesamiento de n√≥minas</li>
                                <li>Generaci√≥n de reportes</li>
                            </ul>
                        </td>
                        <td>
                            <ul>
                                <li>No puede gestionar usuarios</li>
                                <li>No accede a configuraci√≥n</li>
                                <li>Permisos configurables</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-info">Solo Lectura</span></td>
                        <td>
                            <ul>
                                <li>Consulta de informaci√≥n</li>
                                <li>Visualizaci√≥n de reportes</li>
                                <li>Acceso a estad√≠sticas</li>
                            </ul>
                        </td>
                        <td>
                            <ul>
                                <li>No puede crear/editar</li>
                                <li>No puede eliminar</li>
                                <li>Solo consulta</li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>

            <h3>10.3 Permisos Granulares</h3>
            <p>El sistema permite configurar permisos espec√≠ficos por m√≥dulo:</p>

            <div class="feature-card">
                <h4>üîê Control de Acceso por M√≥dulo</h4>
                <ul>
                    <li><strong>Dashboard:</strong> Ver/ocultar m√©tricas espec√≠ficas</li>
                    <li><strong>Empleados:</strong> Crear, editar, eliminar, consultar</li>
                    <li><strong>Conceptos:</strong> Gestionar conceptos de n√≥mina</li>
                    <li><strong>Planillas:</strong> Crear, procesar, reprocesar</li>
                    <li><strong>Acreedores:</strong> Gestionar instituciones externas</li>
                    <li><strong>Reportes:</strong> Acceso a diferentes tipos de reportes</li>
                    <li><strong>Configuraci√≥n:</strong> Modificar par√°metros del sistema</li>
                </ul>
            </div>

            <h3>10.4 Seguridad del Sistema</h3>
            <p>El sistema implementa m√∫ltiples capas de seguridad:</p>

            <ul>
                <li><strong>Autenticaci√≥n:</strong> Usuarios y contrase√±as obligatorios</li>
                <li><strong>Autorizaci√≥n:</strong> Verificaci√≥n de permisos en cada acci√≥n</li>
                <li><strong>CSRF Protection:</strong> Tokens de seguridad en formularios</li>
                <li><strong>Session Management:</strong> Control de sesiones activas</li>
                <li><strong>SQL Injection Prevention:</strong> Consultas parametrizadas</li>
                <li><strong>XSS Protection:</strong> Sanitizaci√≥n de datos de entrada</li>
            </ul>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Buenas Pr√°cticas de Seguridad:</strong>
                <ul>
                    <li>Usar contrase√±as fuertes con m√≠nimo 8 caracteres</li>
                    <li>Cambiar contrase√±as peri√≥dicamente</li>
                    <li>No compartir credenciales de acceso</li>
                    <li>Cerrar sesi√≥n al terminar de trabajar</li>
                    <li>Reportar actividades sospechosas</li>
                </ul>
            </div>
        </div>

        <div class="section" id="soporte">
            <h2>11. üÜò Soporte y Soluci√≥n de Problemas</h2>

            <h3>11.1 Problemas Comunes y Soluciones</h3>

            <h4>11.1.1 Error al Procesar Planilla</h4>
            <div class="alert alert-warning">
                <strong>Problema:</strong> La planilla no se procesa o muestra errores de c√°lculo.
            </div>
            <p><strong>Posibles Causas y Soluciones:</strong></p>
            <ul>
                <li><strong>Conceptos mal configurados:</strong>
                    <ul>
                        <li>Verificar que los conceptos con f√≥rmulas tengan "Monto C√°lculo" activado</li>
                        <li>Probar las f√≥rmulas antes de aplicarlas</li>
                        <li>Revisar las condiciones de aplicaci√≥n (tipos, situaciones, frecuencias)</li>
                    </ul>
                </li>
                <li><strong>Empleados sin datos completos:</strong>
                    <ul>
                        <li>Verificar que todos los empleados tengan posici√≥n asignada</li>
                        <li>Confirmar que las posiciones tengan salario configurado</li>
                        <li>Revisar fechas de ingreso y situaci√≥n actual</li>
                    </ul>
                </li>
                <li><strong>Problemas de base de datos:</strong>
                    <ul>
                        <li>Verificar conexi√≥n a base de datos</li>
                        <li>Revisar logs del sistema para errores espec√≠ficos</li>
                        <li>Contactar soporte t√©cnico si persisten errores SQL</li>
                    </ul>
                </li>
            </ul>

            <h4>11.1.2 Deducciones No se Aplican</h4>
            <div class="alert alert-warning">
                <strong>Problema:</strong> Los conceptos con funci√≥n ACREEDOR() no calculan correctamente.
            </div>
            <p><strong>Verificar:</strong></p>
            <ol>
                <li>El concepto tiene "Monto C√°lculo" = 1</li>
                <li>La f√≥rmula est√° escrita correctamente: ACREEDOR(EMPLEADO, id)</li>
                <li>El empleado tiene deducci√≥n registrada en la tabla deductions</li>
                <li>El employee_id en deductions coincide con el c√≥digo del empleado</li>
                <li>El creditor_id corresponde al acreedor correcto</li>
            </ol>

            <h4>11.1.3 S√≠mbolos de Moneda Incorrectos</h4>
            <div class="alert alert-warning">
                <strong>Problema:</strong> Aparece "Q" en lugar del s√≠mbolo configurado.
            </div>
            <p><strong>Soluci√≥n:</strong></p>
            <ol>
                <li>Ir a Configuraci√≥n > Empresa</li>
                <li>Verificar que el s√≠mbolo de moneda est√© configurado</li>
                <li>Si hay vistas que a√∫n muestran "Q", contactar soporte para actualizaci√≥n</li>
            </ol>

            <h4>11.1.4 Errores de Permisos</h4>
            <div class="alert alert-warning">
                <strong>Problema:</strong> Usuario no puede acceder a ciertos m√≥dulos.
            </div>
            <p><strong>Verificar:</strong></p>
            <ol>
                <li>El usuario tiene el rol correcto asignado</li>
                <li>Los permisos espec√≠ficos est√°n configurados en role_permissions</li>
                <li>El usuario tiene estado "activo"</li>
                <li>La sesi√≥n no ha expirado</li>
            </ol>

            <h3>11.2 Mantenimiento Preventivo</h3>

            <h4>11.2.1 Respaldo de Datos</h4>
            <div class="alert alert-info">
                <strong>Recomendaci√≥n:</strong> Realizar respaldos regulares de la base de datos.
            </div>
            <ul>
                <li><strong>Frecuencia:</strong> Diario (autom√°tico) + Semanal (manual)</li>
                <li><strong>Alcance:</strong> Base de datos completa + archivos del sistema</li>
                <li><strong>Ubicaci√≥n:</strong> Servidor externo o nube</li>
                <li><strong>Pruebas:</strong> Verificar integridad mensualmente</li>
            </ul>

            <h4>11.2.2 Limpieza de Logs</h4>
            <p>El sistema genera logs de errores que deben limpiarse peri√≥dicamente:</p>
            <ul>
                <li>Revisar logs semanalmente</li>
                <li>Archivar logs antiguos</li>
                <li>Investigar errores recurrentes</li>
                <li>Mantener solo √∫ltimos 30 d√≠as en servidor</li>
            </ul>

            <h4>11.2.3 Actualizaci√≥n de Sistema</h4>
            <p>Para mantener el sistema actualizado y seguro:</p>
            <ul>
                <li>Aplicar parches de seguridad cuando est√©n disponibles</li>
                <li>Actualizar PHP y extensiones seg√∫n recomendaciones</li>
                <li>Mantener base de datos MySQL/MariaDB actualizada</li>
                <li>Revisar configuraci√≥n de servidor web</li>
            </ul>

            <h3>11.3 Contacto de Soporte T√©cnico</h3>

            <div class="feature-card">
                <h4>üìû Canales de Soporte</h4>
                <ul>
                    <li><strong>Email:</strong> soporte@empresa.com</li>
                    <li><strong>Tel√©fono:</strong> +502 1234-5678</li>
                    <li><strong>Horario:</strong> Lunes a Viernes, 8:00 AM - 6:00 PM</li>
                    <li><strong>Respuesta:</strong> M√°ximo 24 horas</li>
                </ul>
            </div>

            <div class="alert alert-info">
                <strong>üí° Antes de Contactar Soporte:</strong>
                <ol>
                    <li>Anote el error exacto que aparece</li>
                    <li>Documente los pasos que llevaron al error</li>
                    <li>Tome capturas de pantalla si es posible</li>
                    <li>Prepare informaci√≥n del usuario y hora del incidente</li>
                </ol>
            </div>

            <h3>11.4 Recursos Adicionales</h3>

            <ul>
                <li><strong>Manual de Administrador:</strong> Configuraci√≥n avanzada del sistema</li>
                <li><strong>Gu√≠a de API:</strong> Para integraciones con otros sistemas</li>
                <li><strong>Videos Tutoriales:</strong> Capacitaci√≥n visual paso a paso</li>
                <li><strong>FAQ:</strong> Preguntas frecuentes y respuestas</li>
                <li><strong>Notas de Versi√≥n:</strong> Nuevas funcionalidades y correcciones</li>
            </ul>
        </div>

        <div class="footer">
            <p><strong>Sistema de Planillas MVC</strong></p>
            <p>Manual de Usuario v1.0 - Agosto 2025</p>
            <p>¬© 2025 - Todos los derechos reservados</p>
            <p><em>Desarrollado con tecnolog√≠a PHP 8.3 + MySQL + AdminLTE</em></p>
        </div>
    </div>

    <script>
        // Funcionalidad para imprimir o exportar a PDF
        document.addEventListener('DOMContentLoaded', function() {
            // Agregar bot√≥n de impresi√≥n si se desea
            console.log('Manual de Usuario cargado correctamente');
            
            // Scroll suave para enlaces internos
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>