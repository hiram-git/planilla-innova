# ü§ñ CLAUDE MEMORY - Sistema de Planillas MVC

## üìù **Estado Actual - V3.2.1 Motor F√≥rmulas Optimizado**
- **Fecha**: 18 de Septiembre, 2025
- **Estado**: ‚úÖ **SISTEMA EMPRESARIAL 100% + MOTOR F√ìRMULAS OPTIMIZADO**
- **Versi√≥n**: 3.2.1 - Core + Acumulados + Reportes + F√≥rmulas Avanzadas

## üéØ **Sistema**
Plataforma empresarial de planillas con legislaci√≥n paname√±a, acumulados autom√°ticos XIII Mes, reportes PDF profesionales con firmas, y estructura organizacional completa.

## ‚úÖ **Completado (100%)**
- ‚úÖ **Core MVC**: Router + Database + Middleware + CSRF + Roles
- ‚úÖ **Planillas**: Procesamiento + PDF + Estados + Acumulados autom√°ticos
- ‚úÖ **XIII Mes Panam√°**: (Salario Anual √∑ 3) - Descuentos legislaci√≥n
- ‚úÖ **Reportes PDF**: Planillas + Comprobantes + Logos empresariales + Firmas
- ‚úÖ **M√≥dulo Organizacional**: CRUD completo + jerarqu√≠as + integraci√≥n empleados
- ‚úÖ **Sistema Logos**: Dropzone.js + triple logo + reportes PDF
- ‚úÖ **JavaScript Modular**: BaseModule + ES6 + JavaScriptHelper
- ‚úÖ **Motor F√≥rmulas**: INIPERIODO/FINPERIODO din√°mico + tipo_acumulado

## üìÑ **Reportes PDF Empresariales**
- **Planillas**: Layout horizontal + logos empresariales + firmas profesionales
- **Comprobantes**: Individuales por empleado + conceptos detallados + logos
- **Triple Logo System**: Logo principal + logo izquierdo reportes + logo derecho reportes
- **Firmas**: Configurables desde BD companies (4 niveles de firma)
- **PDFReportController**: Controlador espec√≠fico para generaci√≥n reportes

## üè¢ **M√≥dulo Organizacional Completo**
- **OrganizationalController**: CRUD completo con create/edit/delete
- **Vistas Completas**: Index con organigrama visual + formularios create/edit
- **JavaScript Modular**: organizational/index.js, create.js, edit.js
- **Jerarqu√≠as Din√°micas**: Paths autom√°ticos + validaci√≥n ciclos
- **Integraci√≥n Empleados**: Campo organigrama_id + foreign key + formularios

## üé® **Sistema Logos Empresariales**
- **Dropzone.js Integration**: Upload arrastrando archivos + preview din√°mico
- **company/logos.js**: M√≥dulo completo gesti√≥n logos con CSRF
- **Dynamic URLs**: Detecci√≥n autom√°tica paths para upload/delete/preview
- **Security**: CSRF tokens + validaciones + preview en tiempo real

## üîß **Stack Tecnol√≥gico**
- **Backend**: PHP 8.3 + MVC + MySQL (planilla_innova)
- **Frontend**: AdminLTE + Bootstrap 4 + JavaScript ES6 modular
- **Reportes**: TCPDF + dise√±o empresarial profesional
- **Estado**: Producci√≥n estable + arquitectura escalable

## üîë **Pr√≥ximas Fases**
1. **üè¢ MULTITENANCY**: Wizard empresas + BD autom√°tica
2. **üí∞ ISR PANAM√Å**: Calculadora impuesto renta + retenciones

---

**‚úÖ SISTEMA EMPRESARIAL COMPLETO + MOTOR F√ìRMULAS OPTIMIZADO**

## üßÆ **Motor F√≥rmulas Conceptos - V3.2.1**
- **Fechas Din√°micas**: INIPERIODO/FINPERIODO con fechas reales planilla_cabecera
- **Funci√≥n ACUMULADOS**: Manejo correcto conceptos m√∫ltiples + preservaci√≥n quoted strings
- **Categorizaci√≥n**: Campo tipo_acumulado para XIII_MES, VACACIONES, etc.
- **Integraci√≥n**: PayrollController pasa fechas autom√°ticamente al calculador

# important-instruction-reminders
Do what has been asked; nothing more, nothing less.
NEVER create files unless they're absolutely necessary for achieving your goal.
ALWAYS prefer editing an existing file to creating a new one.
NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.

## üìÅ **Estructura de Documentaci√≥n**
- **CLAUDE.md**: Memoria principal del proyecto (ra√≠z)
- **documentation/**: Directorio para archivos de documentaci√≥n del proyecto
  - **ROADMAP.md**: Hoja de ruta y planificaci√≥n  
  - **CHANGELOG.md**: Historial de cambios y versiones
  - **TODO.md**: Lista de tareas pendientes
- **docs/**: Directorio de AdminLTE (NO MODIFICAR)

IMPORTANTE: Todos los archivos de documentaci√≥n del proyecto deben guardarse en `/documentation` para no confundirlos con `/docs` que pertenece a la plantilla AdminLTE.

      
      IMPORTANT: this context may or may not be relevant to your tasks. You should not respond to this context unless it is highly relevant to your task.